# Mercury Production Configuration
# Used in production deployments via MERCURY_CONFIG_PATH=/app/config/production.toml

[mercury]
log_level = "INFO"
log_json = true
dry_run = false  # Production - live trading

[redis]
url = "redis://mercury-redis:6379"
db = 0

[database]
path = "/app/data/mercury.db"

[polymarket]
clob_url = "https://clob.polymarket.com/"
gamma_url = "https://gamma-api.polymarket.com"
ws_url = "wss://ws-subscriptions-clob.polymarket.com/ws/market"
# Credentials from env vars:
# MERCURY_POLYMARKET_PRIVATE_KEY
# MERCURY_POLYMARKET_API_KEY
# MERCURY_POLYMARKET_API_SECRET
# MERCURY_POLYMARKET_API_PASSPHRASE

[polygon]
rpc_url = "https://polygon-rpc.com"
# Private key from env: MERCURY_POLYGON_PRIVATE_KEY

[metrics]
enabled = true
port = 9090

[market_data]
stale_threshold_seconds = 10
refresh_interval_seconds = 5

[execution]
rebalance_partial_fills = true
default_timeout_seconds = 5.0
price_buffer_cents = 1
max_concurrent = 3
max_queue_size = 100
queue_timeout_seconds = 60.0

[retry]
max_attempts = 3
min_wait_seconds = 1.0
max_wait_seconds = 30.0
exponential_multiplier = 2.0
jitter = true

[retry.network]
max_attempts = 5
min_wait_seconds = 0.5
max_wait_seconds = 20.0

[retry.rate_limit]
max_attempts = 5
min_wait_seconds = 2.0
max_wait_seconds = 60.0

[risk]
# Production risk limits - more conservative
max_daily_loss_usd = 100.0
max_unhedged_exposure_usd = 50.0
max_position_size_usd = 25.0
max_per_market_exposure_usd = 100.0
max_daily_trades = 100
circuit_breaker_cooldown_minutes = 5

# Circuit breaker thresholds
circuit_breaker_warning_failures = 3
circuit_breaker_caution_failures = 4
circuit_breaker_halt_failures = 5

circuit_breaker_warning_loss = 50.0
circuit_breaker_caution_loss = 75.0
circuit_breaker_halt_loss = 100.0

# Daily reset at midnight UTC
daily_reset_time_utc = "00:00"
daily_reset_enabled = true

[settlement]
check_interval_seconds = 300
max_claim_attempts = 5
resolution_wait_seconds = 600
retry_initial_delay_seconds = 60
retry_max_delay_seconds = 3600
retry_exponential_base = 2.0
retry_jitter = true
alert_after_failures = 3

[strategies.gabagool]
enabled = true
markets = ["BTC", "ETH", "SOL"]
min_spread_threshold = 0.015
max_trade_size_usd = 25.0
max_per_window_usd = 50.0
balance_sizing_enabled = true
balance_sizing_pct = 0.25
gradual_entry_enabled = false
gradual_entry_tranches = 3
