# Mercury Default Configuration
# Copy to development.toml or production.toml and customize

[mercury]
log_level = "INFO"
log_json = false
dry_run = true  # ALWAYS default to dry run

[redis]
url = "redis://localhost:6379"
db = 0

[database]
path = "./data/mercury.db"

[polymarket]
clob_url = "https://clob.polymarket.com/"
gamma_url = "https://gamma-api.polymarket.com"
ws_url = "wss://ws-subscriptions-clob.polymarket.com/ws/market"
# Credentials from env vars:
# MERCURY_POLYMARKET_PRIVATE_KEY
# MERCURY_POLYMARKET_API_KEY
# MERCURY_POLYMARKET_API_SECRET
# MERCURY_POLYMARKET_API_PASSPHRASE

[polygon]
rpc_url = "https://polygon-rpc.com"
# Private key from env: MERCURY_POLYGON_PRIVATE_KEY

[metrics]
enabled = true
port = 9090

[market_data]
stale_threshold_seconds = 10  # Default 10s staleness detection
refresh_interval_seconds = 5

[execution]
rebalance_partial_fills = true
default_timeout_seconds = 5.0
price_buffer_cents = 1  # Add 1 cent for better fills
max_concurrent = 3      # Max concurrent order executions
max_queue_size = 100    # Max signals in execution queue
queue_timeout_seconds = 60.0

[retry]
# Global retry settings for transient failures
max_attempts = 3              # Max retry attempts including initial
min_wait_seconds = 1.0        # Min wait between retries
max_wait_seconds = 30.0       # Max wait between retries
exponential_multiplier = 2.0  # Backoff multiplier
jitter = true                 # Add randomness to wait times

[retry.network]
# Network-specific retry settings (higher tolerance)
max_attempts = 5
min_wait_seconds = 0.5
max_wait_seconds = 20.0

[retry.rate_limit]
# Rate limit retry settings (longer backoff)
max_attempts = 5
min_wait_seconds = 2.0
max_wait_seconds = 60.0

[risk]
max_daily_loss_usd = 100.0
max_unhedged_exposure_usd = 50.0
max_position_size_usd = 25.0
max_per_market_exposure_usd = 100.0
max_daily_trades = 100
circuit_breaker_cooldown_minutes = 5

# 4-level circuit breaker thresholds (NORMAL -> WARNING -> CAUTION -> HALT)
# Failure thresholds (consecutive failures)
circuit_breaker_warning_failures = 3
circuit_breaker_caution_failures = 4
circuit_breaker_halt_failures = 5

# Loss thresholds (in USD) - trip at these daily loss levels
circuit_breaker_warning_loss = 50.0
circuit_breaker_caution_loss = 75.0
circuit_breaker_halt_loss = 100.0

# Daily reset configuration
# Reset time in UTC (24-hour format: "HH:MM")
# Examples: "00:00" for midnight, "09:30" for market open
daily_reset_time_utc = "00:00"
# Whether to automatically reset at the configured time
daily_reset_enabled = true

[settlement]
check_interval_seconds = 300  # 5 minutes
max_claim_attempts = 5

[strategies.gabagool]
enabled = true
markets = ["BTC", "ETH", "SOL"]
min_spread_threshold = 0.015
max_trade_size_usd = 25.0
max_per_window_usd = 50.0
balance_sizing_enabled = true
balance_sizing_pct = 0.25
gradual_entry_enabled = false
gradual_entry_tranches = 3
